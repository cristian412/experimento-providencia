<!DOCTYPE html>
<html lang="es">
<head>
<head>
    <!-- start: META -->
    <meta charset="utf-8">
    <!--[if IE]><meta http-equiv='X-UA-Compatible' content="IE=edge,IE=9,IE=8,chrome=1"/><![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
    <!-- end: META -->
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">
    <title>Gestion de Expedientes Digitales</title>
    <link href="https://www.csj.gov.py/gestionelectronicajudicial/Content/bootstrap.css" rel="stylesheet">
    <link href="https://www.csj.gov.py/gestionelectronicajudicial/Content/bootstrap-theme.css" rel="stylesheet">
    <link href="https://www.csj.gov.py/gestionelectronicajudicial/Content/bootstrap-responsive.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.css" rel="stylesheet">
    <link href="https://www.csj.gov.py/gestionelectronicajudicial/Content/all-animation.css" rel="stylesheet">
    <link href="https://www.csj.gov.py/gestionelectronicajudicial/Content/assets/css/main.css" rel="stylesheet">
    <link href="https://www.csj.gov.py/gestionelectronicajudicial/Content/assets/css/main-responsive.css" rel="stylesheet">
    <link rel="stylesheet" href="https://www.csj.gov.py/gestionelectronicajudicial/Content/assets/css/theme_light.css" type="text/css" id="skin_color">
    <link rel="stylesheet" href="https://www.csj.gov.py/gestionelectronicajudicial/Content/assets/css/print.css" type="text/css" media="print">
    <link href="https://www.csj.gov.py/gestionelectronicajudicial/Content/assets/plugins/select2/select2.css" rel="stylesheet">
    <link href="https://www.csj.gov.py/gestionelectronicajudicial/Content/assets/plugins/bootstrap-modal/css/bootstrap-modal-bs3patch.css" rel="stylesheet">
    <link href="https://www.csj.gov.py/gestionelectronicajudicial/Content/assets/plugins/bootstrap-modal/css/bootstrap-modal.css" rel="stylesheet">
    <link href="https://www.csj.gov.py/gestionelectronicajudicial/Content/site.css" rel="stylesheet">
    <!-- end: MAIN CSS -->
    <link href="https://www.csj.gov.py/gestionelectronicajudicial/Content/datatable/css/jquery.dataTables.css" rel="stylesheet">
    <link href="https://www.csj.gov.py/gestionelectronicajudicial/Content/datatable/css/dataTables.tableTools.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
</head>



</head>
<body>
    <div class="navbar navbar-inverse navbar-fixed-top">
        <!-- start: TOP NAVIGATION CONTAINER -->
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand" href="index.html"><i class="clip-stack-2"></i>&nbsp;GESTION EXPEDIENTES PENDIENTES</a>
            </div>
        </div>
        <!-- end: TOP NAVIGATION CONTAINER -->
    </div>


<div class="page-container">
    <div style="background-color: #FFFFFF; padding: 5px;">
        <div class="container" style="min-height: 1594px; margin-top:60px;">
            <div id="alertConsultaCaso" class="alert alert-info">
                <i class="clip-info-2"></i> <b>Consulta de expedientes</b> <br> 
                <b>Carátula:</b> UNIÓN NEGOCIOS Y COBRANZAS SOCIEDAD ANÓNIMA C/ RUBEN DARIO MALDONADO GONZALEZ Y OTROS 
                S/ ACCIÓN PREPARATORIA DE JUICIO EJECUTIVO <br> 
                <b>Despacho:</b> JUZGADO DE PRIMERA INSTANCIA EN LO CIVIL Y COMERCIAL DEL SEXTO TURNO, Sria. 12
            </div>

<div class="row">
  <!-- Primera columna -->
  <div class="col-md-3">
    <div class="p-3 border bg-light">
        <table id="grillaActuacionesDelCaso" class="table table-hover table-striped dataTable no-footer" role="grid" aria-describedby="grillaActuacionesDelCaso_info">
        <thead>
            <tr role="row">
                <th class="sorting_desc" tabindex="0" aria-controls="grillaActuacionesDelCaso" rowspan="1" colspan="1" aria-label="Fecha: Activar para ordenar la columna de manera ascendente" style="width: 15%;">Fecha</th>
                <th class="sorting" tabindex="0" aria-controls="grillaActuacionesDelCaso" rowspan="1" colspan="1" aria-label="Descripción: Activar para ordenar la columna de manera ascendente" style="width: 25%;">Descripción</th>
                <th class="sorting" tabindex="0" aria-controls="grillaActuacionesDelCaso" rowspan="1" colspan="1" aria-label="Tipo actuación: Activar para ordenar la columna de manera ascendente" style="width: 25%;">Tipo actuación</th></tr>
        </thead>
        <tbody id="actuaciones-caso-lista">
            <tr id="group-id-grillaActuacionesDelCaso_ejecutivo"><td class="group ejecutivo expanded-group group-item-expander" colspan="5" data-group="ejecutivo" data-group-level="0">EJECUTIVO</td></tr>
        </table>
    </div>

  </div>
  <!-- Segunda columna -->
  <div class="col-md-4">
    <div class="p-3 border bg-light">
        <div id="iframe-pdf"></div>
    </div>
  </div>
  <!-- Tercera columna -->
  <div class="col-md-1">
    <div class="p-3 border bg-light">
        Parámetros
    </div>
  </div>
  <!-- Cuarta columna -->
  <div class="col-md-4">
    <div class="p-3 border bg-light">
    <button type="button" onclick="regenerarTexto();" class="btn btn-success" id="regenerarTexto"><i class="fa fa-gear"></i>&nbsp;Regenerar</button>
    <button class="btn btn-primary" id="finalizarTexto" onclick="finalizarTexto(); return false;">
    <i class="fa fa-send"></i> Finalizar</button>
    </div>
  </div>
</div>

    <script>
        // URL del archivo JSON
        const url = 'datos/ActuacionesCaso.json';
        // Seleccionar el tbody
        const tbody = document.getElementById('actuaciones-caso-lista');

        function convertirFecha(fechaRaw) {
        const timestamp = parseInt(fechaRaw.match(/\d+/)[0], 10);
        const fecha = new Date(timestamp);
        const fechaLegible = fecha.toLocaleString();
        return fechaLegible;
        }

        // Función para cargar y mostrar los datos
        const cargarDatos = async () => {
        try {
            // Hacer la solicitud al archivo JSON
            const respuesta = await fetch(url);

            // Verificar si la respuesta es exitosa
            if (!respuesta.ok) {
            throw new Error(`Error al cargar los datos: ${respuesta.statusText}`);
            }

            // Convertir la respuesta a JSON
            const casos = await respuesta.json();

            // Generar filas dinámicas
            casos.forEach(caso => {
                const tr = document.createElement('tr');
                tr.setAttribute('role', 'row');
                tr.className = 'odd group-item group-item-ejecutivo';
                tr.setAttribute('data-group', 'ejecutivo');

                // Construir la URL del PDF
                const url = `https://unionnegocios.com.py/sistema/content/csj/pdf/${caso.CodActuacionCaso}.pdf`;

                // Configurar el redireccionamiento con un iframe al hacer clic
                tr.setAttribute('onclick', `container.innerHTML = '<iframe src="${url}" style="width:100%;height:500px"></iframe>';`);

                // Agregar celdas con los datos del caso
                tr.innerHTML = `
                    <td>${convertirFecha(caso.FechaActuacion)}</td>
                    <td>${caso.DescripcionActuacion}</td>
                    <td>${caso.DescripcionTipoActuacion}</td>
                `;
                // Agregar la fila al cuerpo de la tabla
                tbody.appendChild(tr);
            });
        } catch (error) {
            console.error('Error al cargar los datos:', error);
        }
        };

        // Llamar a la función para cargar datos
        cargarDatos();

        // // Seleccionar todos los botones
        // const buttons = document.querySelectorAll('.group-item-ejecutivo');
        // // Obtener la celda correspondiente (columna 2)
        // const container = this.document.getElementById('iframe-pdf');
        // buttons.forEach(button => {
        // button.addEventListener('click', function () {
        //     // Obtener el URL del iframe desde el atributo data-url
        //     const url = this.dataset.url;

        //     // Crear o reemplazar el iframe
        //     container.innerHTML = `<iframe src="${url}" style="width:100%;height:500px"></iframe>`;
        // });
        // });


    </script>
    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
